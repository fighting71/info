direction:扩展类/扩展方法/元数据共享

author:yj

since:2017-12-10 17:25:32

	扩展类的定义：
		扩展类的实现通过partial[部分的]修饰符实现
		
		使用partial修饰的类代表的是一个部分类即此类仅仅代表一个类的一部分
		故一个类可以有无数个partial修饰的类型
		
		注：命名空间必须保存一致，分部类与分部类中的成员不可出现重复冲突
		
	扩展方法：
		（1）定义扩展方法：

		　　定义静态类，并添加public的静态方法，第一个参数 代表 扩展方法的扩展类。

		　　a) 它必须放在一个非嵌套、非泛型的静态类中(的静态方法);

		　　b) 它至少有一个参数;

		　　c) 第一个参数必须附加 this 关键字;

		　　d) 第一个参数不能有任何其他修饰符（out/ref）

		　　e) 第一个参数不能是指针类型

		　　（2）当我们把扩展方法定义到其它程序集中时，一定要注意调用扩展方法的环境中需要包含扩展方法所在的命名空间！

			编译器默认认为一个表达式是要使用一个实例方法，但如果没有找到，就会检查导入的命名空间和当前命名空间里所有的扩展方法，并匹配到适合的方法。
			
		（2）实现原理：
			通过reflect查看源码知道：扩展方法实际上就是静态方法的相互调用
			
	元数据共享：
		a.使用场景:
			用于实体验证
			共享属性的特性
		b.使用:
			[MetadataType(typeof(className))]